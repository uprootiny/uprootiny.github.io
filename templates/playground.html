{% extends "base.html" %}

{% block extra_head %}
<style>
.playground-layout {
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    color: white;
}

.playground-header {
    text-align: center;
    margin-bottom: 50px;
    padding: 40px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    backdrop-filter: blur(15px);
}

.playground-header h1 {
    font-size: 2.8em;
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

.playground-description {
    font-size: 1.2em;
    opacity: 0.9;
    line-height: 1.6;
}

.playground-content {
    font-size: 1.1em;
    line-height: 1.7;
}

.playground-content h2 {
    color: #ffd700;
    margin-top: 50px;
    margin-bottom: 25px;
    font-size: 2em;
    text-align: center;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

.playground-content h3 {
    color: #87ceeb;
    margin-top: 35px;
    margin-bottom: 20px;
    font-size: 1.4em;
    padding: 15px 20px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    backdrop-filter: blur(5px);
}

.playground-content h4 {
    color: #98fb98;
    margin-top: 25px;
    margin-bottom: 15px;
    font-size: 1.2em;
}

.playground-content p {
    margin-bottom: 20px;
    opacity: 0.95;
}

.playground-content strong {
    color: #ffd700;
    font-weight: 600;
}

.playground-content em {
    color: #ffb6c1;
    font-style: italic;
}

/* Interactive tool boxes */
.tool-box {
    background: rgba(255, 255, 255, 0.15);
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 15px;
    padding: 25px;
    margin: 25px 0;
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
}

.tool-box:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
    border-color: rgba(255, 215, 0, 0.5);
}

/* Controls styling */
.controls-section {
    background: rgba(0, 0, 0, 0.2);
    padding: 20px;
    border-radius: 10px;
    margin: 20px 0;
}

.controls-section h4 {
    color: #ffd700;
    margin-bottom: 15px;
}

.controls-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-top: 15px;
}

.control-item {
    background: rgba(255, 255, 255, 0.1);
    padding: 10px 15px;
    border-radius: 8px;
    border-left: 4px solid #87ceeb;
    transition: all 0.3s ease;
}

.control-item:hover {
    background: rgba(255, 255, 255, 0.2);
    border-left-color: #ffd700;
}

/* Exercise sections */
.exercise-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin: 30px 0;
}

.exercise-card {
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 12px;
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.exercise-card:hover {
    border-color: rgba(255, 215, 0, 0.5);
    transform: scale(1.02);
}

.exercise-title {
    color: #87ceeb;
    font-size: 1.2em;
    font-weight: 600;
    margin-bottom: 10px;
}

.exercise-description {
    opacity: 0.9;
    line-height: 1.5;
}

/* Sound mapping visualization */
.sound-mapping {
    background: linear-gradient(45deg, rgba(255, 0, 150, 0.2), rgba(0, 255, 255, 0.2));
    padding: 20px;
    border-radius: 15px;
    margin: 20px 0;
}

/* Cultural color section */
.culture-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin: 25px 0;
}

.culture-card {
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 10px;
    border-left: 5px solid;
    transition: all 0.3s ease;
}

.culture-card:nth-child(1) { border-left-color: #ff6b6b; }
.culture-card:nth-child(2) { border-left-color: #4ecdc4; }
.culture-card:nth-child(3) { border-left-color: #45b7d1; }
.culture-card:nth-child(4) { border-left-color: #96ceb4; }
.culture-card:nth-child(5) { border-left-color: #feca57; }
.culture-card:nth-child(6) { border-left-color: #ff9ff3; }

.culture-card:hover {
    transform: translateX(10px);
    background: rgba(255, 255, 255, 0.2);
}

/* Requirements section */
.requirements {
    background: rgba(0, 0, 0, 0.3);
    padding: 25px;
    border-radius: 15px;
    margin: 30px 0;
    border: 2px dashed rgba(255, 255, 255, 0.3);
}

.requirements h3 {
    color: #ffd700;
    margin-bottom: 20px;
}

.requirements ul {
    list-style-type: none;
    padding: 0;
}

.requirements li {
    padding: 8px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.requirements li:before {
    content: "âœ“ ";
    color: #98fb98;
    font-weight: bold;
}

/* Responsive design */
@media (max-width: 768px) {
    .playground-layout {
        padding: 20px 10px;
    }
    
    .playground-header h1 {
        font-size: 2.2em;
    }
    
    .exercise-grid, .culture-grid, .controls-list {
        grid-template-columns: 1fr;
    }
}

/* Animation for interactive elements */
@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

.tool-box:hover {
    animation: float 2s ease-in-out infinite;
}
</style>
{% endblock %}

{% block content %}
<div class="playground-layout">
    <header class="playground-header">
        <h1>{{ page.title }}</h1>
        {% if page.description %}
        <p class="playground-description">{{ page.description }}</p>
        {% endif %}
    </header>
    
    <div class="playground-content">
        {{ page.content | safe }}
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Wrap interactive experiences in tool boxes
    const content = document.querySelector('.playground-content');
    const h3Elements = content.querySelectorAll('h3');
    
    h3Elements.forEach(function(h3) {
        if (!h3.closest('.tool-box')) {
            let nextElement = h3.nextElementSibling;
            const elements = [h3];
            
            // Collect elements until next h2 or h3
            while (nextElement && !nextElement.matches('h2, h3')) {
                elements.push(nextElement);
                nextElement = nextElement.nextElementSibling;
            }
            
            if (elements.length > 1) {
                const wrapper = document.createElement('div');
                wrapper.className = 'tool-box';
                
                elements[0].parentNode.insertBefore(wrapper, elements[0]);
                elements.forEach(el => wrapper.appendChild(el));
            }
        }
    });
    
    // Create exercise grids for specific sections
    const exerciseSections = content.querySelectorAll('h4');
    exerciseSections.forEach(function(h4) {
        if (h4.textContent.includes('Exercises:') || h4.textContent.includes('Training:')) {
            let nextUl = h4.nextElementSibling;
            while (nextUl && nextUl.tagName !== 'UL') {
                nextUl = nextUl.nextElementSibling;
            }
            
            if (nextUl && nextUl.tagName === 'UL') {
                const grid = document.createElement('div');
                grid.className = 'exercise-grid';
                
                const items = nextUl.querySelectorAll('li');
                items.forEach(function(li) {
                    const card = document.createElement('div');
                    card.className = 'exercise-card';
                    
                    const title = document.createElement('div');
                    title.className = 'exercise-title';
                    const titleText = li.textContent.split(':')[0] || li.textContent.split('-')[0];
                    title.textContent = titleText;
                    
                    const description = document.createElement('div');
                    description.className = 'exercise-description';
                    description.textContent = li.textContent.substring(titleText.length + 1).trim();
                    
                    card.appendChild(title);
                    card.appendChild(description);
                    grid.appendChild(card);
                });
                
                nextUl.parentNode.replaceChild(grid, nextUl);
            }
        }
    });
    
    // Create culture grid for cultural contexts
    const cultureHeaders = content.querySelectorAll('h4');
    cultureHeaders.forEach(function(h4) {
        if (h4.textContent.includes('Cultures Featured:')) {
            let nextUl = h4.nextElementSibling;
            while (nextUl && nextUl.tagName !== 'UL') {
                nextUl = nextUl.nextElementSibling;
            }
            
            if (nextUl && nextUl.tagName === 'UL') {
                const grid = document.createElement('div');
                grid.className = 'culture-grid';
                
                const items = nextUl.querySelectorAll('li');
                items.forEach(function(li) {
                    const card = document.createElement('div');
                    card.className = 'culture-card';
                    card.innerHTML = li.innerHTML;
                    grid.appendChild(card);
                });
                
                nextUl.parentNode.replaceChild(grid, nextUl);
            }
        }
    });
    
    // Style requirements sections
    const reqHeaders = content.querySelectorAll('h3');
    reqHeaders.forEach(function(h3) {
        if (h3.textContent.includes('Requirements') || h3.textContent.includes('Technical')) {
            let nextElement = h3.nextElementSibling;
            const elements = [h3];
            
            while (nextElement && !nextElement.matches('h2, h3')) {
                elements.push(nextElement);
                nextElement = nextElement.nextElementSibling;
            }
            
            if (elements.length > 1) {
                const wrapper = document.createElement('div');
                wrapper.className = 'requirements';
                
                elements[0].parentNode.insertBefore(wrapper, elements[0]);
                elements.forEach(el => wrapper.appendChild(el));
            }
        }
    });
});
</script>
{% endblock %}